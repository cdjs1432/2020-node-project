
<!DOCTYPE html>
<html lang="en">
<%- include("../header"); %>
<body>
  <%- include("../menu"); %>
 
  <!-- Material form register -->
<div class="card winter-neva-gradient">

  <h5 class="card-header white-text text-center py-4">
      <strong>Sign up</strong>
  </h5>

  <!--Card content-->
  <div class="card-body px-lg-5 pt-0">

      <!-- Form -->
      <form id="signupForm" class="text-center" style="color: #757575;" action="#!">

          <!-- Username -->
          <div class="md-form input-with-pre-icon">
            <i class="fas fa-user input-prefix"></i>
            <input type="text" id="name" required class="form-control">
            <label for="name">Input Name</label>
            </div>

          <!-- E-mail -->
          <div class="md-form input-with-pre-icon">
            <i class="fas fa-envelope input-prefix"></i>
            <input type="email" id="email" required class="form-control">
            <label for="email">E-mail</label>
        </div>

        <!-- Password -->
        <div class="md-form input-with-pre-icon">
            <i class="fas fa-lock input-prefix"></i>
            <input type="password" id="password" required class="form-control" aria-describedby="materialRegisterFormPasswordHelpBlock">
            <label for="password">Input Password</label>
        </div>
          
          <!-- Sign up button -->
          <button class="btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0" type="submit">Sign up</button>

      </form>
      <!-- Form -->

  </div>

</div>
<!-- Material form register -->

  <%- include("../footer"); %>
  <script>
      $(function() {
          $("#signupForm").submit((event) => {
              event.preventDefault();
              // 등록
              const name = $("#name").val();
              const email = $("#email").val();
              const password = $("#password").val();

          $.ajax({
              url: "/api/player/signup",
              type: "POST",
              data: { name, email, password },
          }).done(() => {
              alert("회원 가입 성공")
              location.href = "/api/player/login"
          }).fail((request, status, error) => {
              alert("회원 가입 실패")
              alert(request.responseText);
          });
      });
    });
  </script>
</body>
</html>
